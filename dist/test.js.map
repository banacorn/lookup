{"version":3,"sources":["webpack:///webpack/bootstrap 8a1d284f04eb8d20beda","webpack:///./src/test/main.ts","webpack:///external \"fs\"","webpack:///external \"colors\"","webpack:///external \"request\"","webpack:///external \"util\"","webpack:///./src/chrome/parser.ts","webpack:///external \"lodash\"","webpack:///external \"bluebird\"","webpack:///external \"xml2js\""],"names":[],"mappings":"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","file":"test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8a1d284f04eb8d20beda\n **/","import * as fs from \"fs\";\nimport { inspect } from \"util\";\nimport * as http from \"http\";\nimport * as _ from \"lodash\";\nimport \"colors\";\nvar request = require(\"request\");\nimport parser from \"../chrome/parser\";\nimport { Section } from \"../types\";\n\nfunction debug(s: any) {\n    const t: string = inspect(s, false, null);\n    console.log(t.cyan)\n}\n\nconst word = process.argv[2] || \"Legierung\";\n\nread(word, (body) => {\n    console.log(\"==================================================\".magenta)\n    parser(body).then((result) => {\n        debug(result)\n    })\n})\n\n\nfunction get(word: string, callback: (s: string) => void) {\n    console.log(`fetching ${word}`.gray)\n    request(`http://en.wiktionary.org/w/index.php?title=${word}&printable=true`, (error: Error, response: any, body: any) => {\n        if (!error && response.statusCode == 200) {\n            console.log(`${word} fetched`.gray)\n            callback(body);\n            fs.writeFile(`corpse/${word}`, body);\n        } else {\n            console.log(`fetching ${word} failed`.gray, response.statusCode)\n        }\n    })\n}\n\nfunction read(word: string, callback: (s: string) => void) {\n    fs.readFile(`corpse/${word}`, (err, data) => {\n        if (err && err.errno === -2) {\n            console.log(`${word} not found`.gray)\n            get(word, callback);\n        } else {\n            callback(data.toString());\n        }\n    })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/test/main.ts\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"colors\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"colors\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"request\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"util\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"util\"\n ** module id = 4\n ** module chunks = 0\n **/","import * as _ from 'lodash'\nimport * as Promise from 'bluebird'\nimport { parseString } from 'xml2js';\nimport { Section } from '../types'\n\n// function group(input: any[], tag: string): Section[] {\n//     let result: Section[] = [];\n//\n//     let section: Section = null;\n//     input.forEach((node: any) => {\n//         if (node['#name'] === tag && section === null) {\n//             section = {\n//                 name: node.span[0]._,\n//                 body: \"\",\n//                 subs: []\n//             }\n//         }\n//     })\n//     return result;\n//     //\n//     // let section\n//     // if (node['#name'] === tag) {\n//     //\n//     // }\n// }\n//\n\nfunction transform(input: any): Section[] {\n    let nodes = input.html.body[0].div[2].div[2].div[3].$$;\n    // trucates some nodes before the content parts\n    nodes = _.drop(nodes, _.findIndex(nodes, ['#name', 'h2']));\n    // removes <hr>s between language sections\n    nodes = nodes.filter((node: any) => node['#name'] !== 'hr' );\n\n    let result: Section[] = [];\n\n    nodes.forEach((node: any) => {\n        switch (node['#name']) {\n            case 'h2':\n                result.push({\n                    name: node.span[0]._,\n                    body: \"...\",\n                    subs: []\n                });\n                break;\n        }\n        console.log(node);\n    })\n    return result;\n}\n\n\nfunction parseXMLPromise(raw: string): Promise<Section[]> {\n    return new Promise<Section[]>((resolve, reject) => {\n        parseString(raw, {\n            explicitChildren: true,\n            preserveChildrenOrder: true\n        }, (err: Error, result: any) => {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(transform(result));\n            }\n        });\n    });\n}\n\nexport default parseXMLPromise\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/chrome/parser.ts\n **/","module.exports = require(\"lodash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"bluebird\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"xml2js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"xml2js\"\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}